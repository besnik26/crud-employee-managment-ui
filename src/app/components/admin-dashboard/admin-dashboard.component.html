<section *ngIf="dashboardData">
  <h1 class="title mt-4 mb-5 text-center">Welcome, {{dashboardData.adminUsername}}!</h1>

  
</section>

<div>
  <div class="total-companies" *ngIf="dashboardData">
    <h3>Total Companies: {{ dashboardData.totalCompanies }}</h3>
    <button routerLink="/add-company" class="add-btn">Add Company +</button>
  </div>
  <div class="company-container">
    <div *ngFor="let company of companies" class="company-card">
      <h1>{{ company.name }}</h1>
      <div class="d-flex align-items-center mb-2">
        <mat-icon style="color: red;" aria-hidden="false" aria-label="Example location icon" fontIcon="location_on"></mat-icon>
        <p>{{ company.location }}</p>
      </div>
      <div class="d-flex align-items-center mb-2" *ngIf="company.users.length === 1">
        <mat-icon style="color: blue;" aria-hidden="false" aria-label="Example location icon" fontIcon="group"></mat-icon>
        <p>{{company.users.length}} member</p>
      </div>
      <div class="d-flex align-items-center mb-2" *ngIf="company.users.length > 1">
        <mat-icon style="color: blue;" aria-hidden="false" aria-label="Example location icon" fontIcon="group"></mat-icon>
        <p>{{company.users.length}} members</p>
      </div>
  
      <div class="mb-2" *ngIf="company.users.length === 0;">
        <p>No members assigned</p>
      </div>
    
      
      <button (click)="router.navigate(['/company-details/', company.id])">See details</button>
      <div class="btn-absolute-div">
        <button class="edit" (click)="router.navigate(['/edit-company', company.id])">
                <mat-icon aria-hidden="false" aria-label="Example edit icon" fontIcon="edit"></mat-icon>
        </button>
        <button class="delete" (click)="deleteCompany(company.id)">
          <mat-icon aria-hidden="false" aria-label="Example delete icon" fontIcon="delete"></mat-icon>
        </button>
      </div>
  
    </div>
  </div>
</div>


<div *ngIf="notifications.length > 0" class="notifications-panel">
  <h3>Notifications</h3>
  <ul>
    <li *ngFor="let n of notifications">
      {{ n.message }} <small>({{ n.createdAt | date:'short' }})</small>
      <button (click)="markAsRead(n.id)">Mark as read</button>
    </li>
  </ul>
</div>

<div class="notification-wrapper">
  <mat-icon aria-hidden="false" (click)="toggleNotifications()" aria-label="Example location icon" fontIcon="notifications"></mat-icon>
  <div>
    <span *ngIf="notifications.length > 0" class="badge">{{ notifications.length }}</span>
  </div>
</div>

<div *ngIf="showNotifications">
  <ul>
    <li *ngFor="let notification of notifications">
      {{ notification.message }}
      <button (click)="markAsRead(notification.id)">Mark as Read</button>
    </li>
  </ul>
</div>



